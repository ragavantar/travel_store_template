<template>
  <div class="Canvas" ref="canvas"></div>
</template>

<script>
  function initCanvas() {
    var type = "WebGL";
    if (!PIXI.utils.isWebGLSupported()) {
      type = "canvas";
    }
    PIXI.utils.sayHello(type);

    // Init app
    this.app = new PIXI.Application({
      antialias: true,
      transparent: false,
      backgroundColor: 0xf8f8f8,
      resolution: 2
    });
    this.app.renderer.autoResize = true;
    this.app.renderer.view.style.position = "absolute";
    this.app.renderer.view.style.display = "block";
    this.app.renderer.autoResize = true;
    this.app.renderer.resize(window.innerWidth, window.innerHeight);
    this.$refs.canvas.appendChild(this.app.view);
  }
  function initBackground() {
    this.bgContainer = new PIXI.Container();

    let bg = new PIXI.Graphics();
    bg.beginFill(0x0a0a0a, 1);
    bg.moveTo(0, 0);
    bg.lineTo(0, 0);
    bg.lineTo(this.app.view.width, 0);
    bg.lineTo(this.app.view.width, this.app.view.height);
    bg.lineTo(0, this.app.view.height);
    bg.endFill();

    this.bgContainer.addChild(bg);

    this.noiseFilter = new PIXI.filters.NoiseFilter();
    this.noiseFilter.noise = 0.35;
    this.bgContainer.filters = [this.noiseFilter];

    this.app.stage.addChild(this.bgContainer);
  }
  function animate() {
    requestAnimationFrame(this.animate);

    this.noiseFilter.seed = Math.random() * 1 * 0.25;
  }
</script>

<style lang="css">
  .Canvas {
    position: relative;
    z-index: 0;
  }
</style>

        methods: {
          setup: function() {
            this.initBackground(),
              this.initRect(),
              this.initProjectsImages(),
              this.initAllProjects(),
              this.listenResize(),
              this.listenGlobalEvents(),
              this.animate(),
              this.initCursor();
          },
          initCanvas: function() {
            var t = "WebGL";
            PIXI.utils.isWebGLSupported() || (t = "canvas"),
              PIXI.utils.sayHello(t),
              (this.appW = window.innerWidth),
              (this.appH = window.innerHeight),
              (this.app = new PIXI.Application({
                antialias: !0,
                transparent: !0,
                resolution: 1
              })),
              (this.app.renderer.view.style.position = "absolute"),
              (this.app.renderer.view.style.display = "block"),
              (this.app.renderer.autoResize = !0),
              this.app.renderer.resize(this.appW, this.appH),
              this.$refs.canvas.appendChild(this.app.view),
              this.loadImages();
          },
          loadImages: function() {
            for (var t in this.projects)
              if (this.projects.hasOwnProperty(t)) {
                var e = this.projects[t];
                this.imagesUrl.push(e.images.main);
              }
            PIXI.loader.on("progress", function(t, e) {
              a.a.$emit("loadingProgress", { progress: t.progress });
            }),
              PIXI.loader
                .add(this.imagesUrl)
                .add("/images/sprite.png")
                .add("/images/displace.png")
                .load(this.setup);
          },
          initBackground: function() {
            this.bgContainer = new PIXI.Container();
            var t = new PIXI.Graphics();
            t.beginFill(16119285, 1),
              t.moveTo(0, 0),
              t.lineTo(0, 0),
              t.lineTo(this.appW, 0),
              t.lineTo(this.appW, this.appH),
              t.lineTo(0, this.appH),
              t.endFill(),
              this.bgContainer.addChild(t),
              (this.noiseFilterBg = new PIXI.filters.NoiseFilter()),
              (this.noiseFilterBg.noise = 0.05),
              (this.bgContainer.filters = [this.noiseFilterBg]),
              this.app.stage.addChild(this.bgContainer);
          },
          initProjectsImages: function(t) {
            var e = this;
            (this.maskContainer = new PIXI.Container()),
              (this.projectsContainer = new PIXI.Container());
            for (var i = 0; i < this.imagesUrl.length; i += 1)
              (this.images[i] = new PIXI.Sprite(
                PIXI.loader.resources[this.imagesUrl[i]].texture
              )),
                this.images[i].anchor.set(0.5);
            this.projectsContainer.addChild(
              this.images[this.currentProjectIndex]
            ),
              (this.displacementSprite = PIXI.Sprite.fromImage(
                "/images/sprite.png"
              )),
              (this.displacementSprite.texture.baseTexture.wrapMode =
                PIXI.WRAP_MODES.REPEAT),
              (this.displacementSprite.scale.x = 0.5),
              (this.displacementSprite.scale.y = 0.5),
              this.projectsContainer.addChild(this.displacementSprite),
              (this.displacementFilter = new PIXI.filters.DisplacementFilter(
                this.displacementSprite
              )),
              (this.projectsContainer.filterArea = new PIXI.Rectangle(
                this.appW / 2,
                0,
                this.appW / 2,
                this.appH
              )),
              (this.projectsContainer.filters = [this.displacementFilter]),
              (this.displacementFilter.scale.x = 10),
              (this.displacementFilter.scale.y = 10),
              (this.hoverDisplacementSprite = PIXI.Sprite.fromImage(
                "/images/displace.png"
              )),
              (this.hoverDisplacementFilter = new PIXI.filters.DisplacementFilter(
                this.hoverDisplacementSprite
              )),
              this.maskContainer.addChild(this.hoverDisplacementSprite),
              (this.maskContainer.filters = [this.hoverDisplacementFilter]),
              (this.hoverDisplacementFilter.scale.x = -60),
              (this.hoverDisplacementFilter.scale.y = -60),
              (this.hoverDisplacementSprite.scale.x = 20),
              (this.hoverDisplacementSprite.scale.y = 20),
              this.hoverDisplacementSprite.anchor.set(0.5),
              this.hoverDisplacementSprite.position.set(0, 0),
              (this.maskX =
                this.images[0].position.x - this.images[0].width / 2),
              (this.maskY =
                this.images[0].position.y - this.images[0].height / 2),
              (this.mask = new PIXI.Graphics()),
              this.mask.beginFill(9160191, 0.4),
              this.mask.moveTo(
                this.maskX + this.padding,
                this.maskY + this.padding
              ),
              this.mask.lineTo(
                this.maskX + this.padding,
                this.maskY + this.padding
              ),
              this.mask.lineTo(
                this.maskX + this.images[0].width - this.padding,
                this.maskY + this.padding
              ),
              this.mask.lineTo(
                this.maskX + this.images[0].width - this.padding,
                this.maskY + this.images[0].height - this.padding
              ),
              this.mask.lineTo(
                this.maskX + this.padding,
                this.maskY + this.images[0].height - this.padding
              ),
              this.mask.endFill(),
              "index" !== this.$route.name || t
                ? "index" === this.$route.name && t
                  ? (this.maskContainer.x =
                      this.appW - this.rectContainer.width / 2)
                  : "projects-slug" === this.$route.name
                  ? ((this.maskContainer.x = window.innerWidth / 2),
                    this.projectsContainer.removeChild(
                      this.images[this.currentProjectIndex]
                    ),
                    (this.currentProjectIndex = this.$store.state.currentProjectIndex),
                    this.projectsContainer.addChild(
                      this.images[this.currentProjectIndex]
                    ))
                  : "about" === this.$route.name &&
                    (this.maskContainer.x = 1.3 * this.appW)
                : (this.maskContainer.x =
                    this.appW + this.rectContainer.width / 2),
              (this.maskContainer.y = this.appH / 2),
              (this.maskContainer.scale.x = 0.465),
              (this.maskContainer.scale.y = 0.465),
              (this.maskContainer.interactive = !0),
              "index" === this.$route.name
                ? ((this.maskContainer.buttonMode = !0),
                  (this.maskContainer.defaultCursor = "pointer"))
                : ((this.maskContainer.buttonMode = !1),
                  (this.maskContainer.defaultCursor = void 0)),
              (this.maskBgHome = new PIXI.Graphics()),
              this.maskBgHome.beginFill("0xF5F5F5", 1),
              this.maskBgHome.moveTo(
                this.maskX + this.padding,
                this.maskY + this.padding
              ),
              this.maskBgHome.lineTo(
                this.maskX + this.padding,
                this.maskY + this.padding
              ),
              this.maskBgHome.lineTo(
                this.maskX + this.images[0].width - this.padding,
                this.maskY + this.padding
              ),
              this.maskBgHome.lineTo(
                this.maskX + this.images[0].width - this.padding,
                this.maskY + this.images[0].height - this.padding
              ),
              this.maskBgHome.lineTo(
                this.maskX + this.padding,
                this.maskY + this.images[0].height - this.padding
              ),
              this.maskBgHome.endFill(),
              this.maskContainer.addChild(this.maskBgHome),
              this.updateProjectBgColor();
            var n = !1;
            this.maskContainer.on("mouseover", function() {
              s.TweenMax.to(e, 0.5, { displacementSpeed: 5, ease: Cubic.ease }),
                a.a.$emit("triggerLinkHover", { state: "hover" }),
                (n = !0);
            }),
              this.maskContainer.on("mousemove", function(t) {
                if (!0 === n) {
                  var i = t.data.global;
                  s.TweenMax.to(e.hoverDisplacementSprite, 0.5, {
                    x: 2.2 * (i.x - e.maskContainer.x),
                    y: 2.2 * (i.y - e.maskContainer.y),
                    ease: Cubic.ease
                  });
                }
              }),
              this.maskContainer.on("mouseout", function() {
                (n = !1),
                  s.TweenMax.to(e, 1.5, { displacementSpeed: 1 }),
                  s.TweenMax.to(e.maskContainer.skew, 0.5, {
                    x: 0,
                    y: 0,
                    ease: Cubic.ease
                  }),
                  s.TweenMax.to(e.hoverDisplacementSprite, 0.5, {
                    x: 0,
                    y: 0,
                    ease: Cubic.ease
                  }),
                  a.a.$emit("triggerLinkHover", { state: "out" });
              }),
              this.maskContainer.on("click", function() {
                a.a.$emit("clickedOnImage");
              }),
              (this.maskContainer.mask = this.mask),
              this.maskContainer.addChild(this.mask),
              this.maskContainer.addChild(this.projectsContainer),
              this.app.stage.addChild(this.maskContainer),
              "allprojects" === this.$route.name &&
                ((this.maskContainer.visible = !1),
                (this.maskContainer.alpha = 0));
          },
          initRect: function(t) {
            (this.rectContainer = new PIXI.Container()),
              (this.rect = new PIXI.Graphics());
            var e = this.appW / 2.24;
            this.rect.beginFill(0, 1),
              this.rect.moveTo(0, 0),
              this.rect.lineTo(0, 0),
              this.rect.lineTo(e, 0),
              this.rect.lineTo(e, this.appH),
              this.rect.lineTo(0, this.appH),
              this.rect.endFill(),
              "index" !== this.$route.name || t
                ? this.rectContainer.position.set(
                    this.appW - e / 2,
                    this.rect.height / 2
                  )
                : this.rectContainer.position.set(
                    this.appW + e / 2,
                    this.rect.height / 2
                  ),
              this.rectContainer.pivot.set(e / 2, this.rect.height / 2),
              "index" === this.$route.name
                ? this.rectContainer.scale.set(1, 1)
                : "projects-slug" === this.$route.name ||
                  "allprojects" === this.$route.name
                ? this.rectContainer.scale.set(4, 2)
                : "about" === this.$route.name &&
                  (this.rectContainer.x = 1.3 * this.appW),
              this.rectContainer.addChild(this.rect),
              this.app.stage.addChild(this.rectContainer);
          },
          initAllProjects: function() {
            if (
              ((this.allProjectsContainer = new PIXI.Container()),
              (this.allProjectsContainer.x = this.appW / 2),
              0 === this.imagesAllProjects.length)
            )
              for (var t = 0; t < this.images.length; t += 1)
                this.imagesAllProjects[t] = this.images[t];
            for (var e = 0; e < this.imagesAllProjects.length; e += 1) {
              this.imagesAllProjects[e].skew.x = 0;
              var i = this.projectsArray[e].color,
                s = this.imagesAllProjects[e].width,
                a = this.imagesAllProjects[e].height,
                n = this.imagesAllProjects[e].x - s / 2,
                r = this.imagesAllProjects[e].y - a / 2,
                o = new PIXI.Graphics();
              o.beginFill(i, 1),
                o.moveTo(n, r),
                o.lineTo(n, r),
                o.lineTo(n + s, r),
                o.lineTo(n + s, r + a),
                o.lineTo(n, r + a),
                o.endFill(),
                (this.containersAllProjects[e] = new PIXI.Container()),
                this.containersAllProjects[e].addChild(o),
                this.containersAllProjects[e].addChild(
                  this.imagesAllProjects[e]
                ),
                (this.containersAllProjects[e].scale.x = 0.43),
                (this.containersAllProjects[e].scale.y = 0.43),
                (this.containersAllProjects[e].x = 500 * e),
                (this.containersAllProjects[e].y = this.appH / 2),
                this.allProjectsContainer.addChild(
                  this.containersAllProjects[e]
                );
            }
            this.app.stage.addChild(this.allProjectsContainer),
              "allprojects" !== this.$route.name &&
                ((this.allProjectsContainer.visible = !1),
                (this.allProjectsContainer.alpha = 0));
          },
          switchToHome: function() {
            var t = this;
            !1 === this.maskContainer.visible &&
              ((this.maskContainer.visible = !0),
              setTimeout(function() {
                s.TweenMax.to(t.maskContainer, 0.2, {
                  alpha: 1,
                  ease: Cubic.ease
                });
              }, 1e3)),
              this.app.stage.removeChild(this.bgContainer),
              this.app.stage.removeChild(this.rectContainer),
              this.app.stage.removeChild(this.maskContainer),
              this.app.stage.removeChild(this.cursorContainer),
              this.app.stage.addChild(this.bgContainer),
              this.app.stage.addChild(this.rectContainer),
              this.app.stage.addChild(this.maskContainer),
              this.app.stage.addChild(this.cursorContainer),
              !0 === this.allProjectsContainer.visible &&
                (s.TweenMax.to(this.allProjectsContainer, 0.2, {
                  alpha: 0,
                  ease: Cubic.ease
                }),
                setTimeout(function() {
                  (t.allProjectsContainer.visible = !1),
                    t.app.stage.removeChild(t.allProjectsContainer);
                }, 300));
            var e = this.maskBgProject.x - this.maskBgProject.x;
            s.TweenMax.to(this.maskBgProject.skew, 0.6, {
              x: 0.2,
              delay: 0.1,
              ease: Power3.easeInOut
            }),
              s.TweenMax.to(this.maskBgProject, 0.6, {
                x: e,
                delay: 0.1,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.maskBgProject.skew, 0.6, {
                x: 0,
                delay: 0.5,
                ease: Power3.easeInOut
              }),
              setTimeout(function() {
                t.maskBgProject.scale.set(1);
              }, 1500),
              s.TweenMax.to(this.rectContainer.skew, 0.5, {
                x: 0.2,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.rectContainer.scale, 0.9, {
                x: 1,
                y: 1,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.rectContainer, 0.9, {
                x: this.appW - this.rect.width / 2,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.rectContainer.skew, 0.5, {
                x: 0,
                delay: 0.25,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.maskContainer.skew, 0.7, {
                x: 0.2,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.maskContainer, 0.9, {
                x: this.appW - this.rect.width / 2,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.maskContainer.skew, 0.7, {
                x: 0,
                delay: 0.3,
                ease: Power3.easeInOut
              }),
              (this.maskContainer.buttonMode = !0),
              (this.maskContainer.defaultCursor = "pointer"),
              setTimeout(function() {
                t.projectsContainer.filterArea = new PIXI.Rectangle(
                  t.appW / 2,
                  0,
                  t.appW / 2,
                  t.appH
                );
              }, 1e3);
          },
          switchToProject: function() {
            var t = this,
              e = this.maskBgProject.x + this.images[0].width + 350;
            this.maskBgProject.scale.set(1.5),
              s.TweenMax.to(this.maskBgProject.skew, 0.8, {
                x: 0.2,
                delay: 0.2,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.maskBgProject, 0.8, {
                x: e,
                delay: 0.3,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.maskBgProject.skew, 0.8, {
                x: 0,
                delay: 0.5,
                ease: Power3.easeInOut
              }),
              this.projectsContainer.removeChild(
                this.images[this.currentProjectIndex]
              ),
              (this.currentProjectIndex = this.$store.state.currentProjectIndex),
              this.projectsContainer.addChild(
                this.images[this.currentProjectIndex]
              ),
              (this.projectsContainer.filterArea = new PIXI.Rectangle(
                0,
                0,
                this.appW,
                this.appH
              )),
              s.TweenMax.to(this.rectContainer.skew, 0.7, {
                x: 0.2,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.rectContainer.scale, 1.2, {
                x: 4,
                y: 2,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.rectContainer.skew, 0.7, {
                x: 0,
                delay: 0.3,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.maskContainer.skew, 0.8, {
                x: 0.2,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.maskContainer, 1.1, {
                x: this.appW / 2,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.maskContainer.skew, 0.6, {
                x: 0,
                delay: 0.3,
                ease: Power3.easeInOut
              }),
              (this.maskContainer.buttonMode = !1),
              (this.maskContainer.defaultCursor = void 0),
              setTimeout(function() {
                t.app.stage.removeChild(t.bgContainer);
              }, 500);
          },
          switchToAbout: function() {
            var t = 1.3 * this.appW;
            s.TweenMax.to(this.rectContainer.skew, 0.8, {
              x: 0.3,
              ease: Power3.easeInOut
            }),
              s.TweenMax.to(this.rectContainer.scale, 1, {
                x: 1.2,
                y: 1.2,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.rectContainer, 1.2, {
                x: t,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.rectContainer.skew, 0.8, {
                x: 0,
                delay: 0.3,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.maskContainer.skew, 0.8, {
                x: 0.2,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.maskContainer, 1.2, {
                x: t,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.maskContainer.skew, 0.8, {
                x: 0,
                delay: 0.3,
                ease: Power3.easeInOut
              });
          },
          switchToAllProjects: function() {
            var t = this;
            (this.allProjectsContainer.visible = !0),
              (this.allProjectsContainer.x += 100),
              setTimeout(function() {
                s.TweenMax.to(t.allProjectsContainer, 0.4, {
                  alpha: 1,
                  x: t.allProjectsContainer.x - 100,
                  ease: Cubic.ease
                });
              }, 1e3),
              s.TweenMax.to(this.maskContainer, 0.4, {
                alpha: 0,
                ease: Cubic.ease
              }),
              setTimeout(function() {
                (t.maskContainer.visible = !1),
                  t.app.stage.removeChild(t.maskContainer),
                  t.app.stage.removeChild(t.bgContainer),
                  t.app.stage.removeChild(t.rectContainer),
                  t.app.stage.removeChild(t.cursorContainer),
                  t.app.stage.addChild(t.rectContainer),
                  t.app.stage.addChild(t.cursorContainer),
                  t.app.stage.removeChild(t.allProjectsContainer),
                  t.app.stage.addChild(t.allProjectsContainer);
              }, 500),
              (this.projectsContainer.filterArea = new PIXI.Rectangle(
                0,
                0,
                this.appW,
                this.appH
              )),
              s.TweenMax.to(this.rectContainer.skew, 0.7, {
                x: 0.3,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.rectContainer.scale, 1.2, {
                x: 4,
                y: 2,
                ease: Power3.easeInOut
              }),
              s.TweenMax.to(this.rectContainer.skew, 0.7, {
                x: 0,
                delay: 0.3,
                ease: Power3.easeInOut
              });
          },
          changeImage: function(t, e) {
            (this.currentProjectIndex = e),
              (this.images[t].alpha = 1),
              (this.images[e].alpha = 0),
              this.projectsContainer.removeChild(
                this.images[t],
                this.images[e]
              ),
              this.projectsContainer.addChild(this.images[e], this.images[t]),
              s.TweenMax.to(this, 1.5, {
                displacementSpeed: 10,
                ease: Cubic.easeInOut
              }),
              s.TweenMax.to(this.displacementFilter.scale, 1, {
                x: 30,
                y: 30,
                ease: Cubic.easeInOut
              }),
              s.TweenMax.to(this.projectsContainer.scale, 1, {
                x: 1.05,
                y: 1.05,
                ease: Cubic.easeInOut
              }),
              s.TweenMax.to(this.images[t], 2, {
                alpha: 0,
                delay: 0.5,
                ease: Cubic.easeInOut
              }),
              s.TweenMax.to(this.images[e], 2, {
                alpha: 1,
                delay: 0.5,
                ease: Cubic.easeInOut
              }),
              s.TweenMax.to(this.projectsContainer.scale, 1.5, {
                x: 1,
                y: 1,
                delay: 1.25,
                ease: Cubic.easeInOut
              }),
              s.TweenMax.to(this.displacementFilter.scale, 3, {
                x: 5,
                y: 5,
                delay: 1,
                ease: Cubic.easeInOut
              }),
              s.TweenMax.to(this, 3, {
                displacementSpeed: 1,
                delay: 1,
                ease: Cubic.easeInOut
              }),
              this.maskContainer.removeChild(this.maskBgProject),
              this.updateProjectBgColor(),
              this.maskContainer.removeChild(this.projectsContainer),
              this.maskContainer.addChild(this.projectsContainer);
          },
          changeImageWithoutAnimation: function(t, e) {
            this.app.start(),
              (this.currentProjectIndex = e),
              this.maskContainer.removeChild(this.maskBgProject),
              this.updateProjectBgColor(),
              this.projectsContainer.removeChild(
                this.images[t],
                this.images[e]
              ),
              this.projectsContainer.addChild(this.images[e]),
              this.maskContainer.removeChild(this.projectsContainer),
              this.maskContainer.addChild(this.projectsContainer);
          },
          updateProjectBgColor: function() {
            var t = this.projectsArray[this.currentProjectIndex].color,
              e = this.maskX - this.images[0].width;
            if (
              ((this.maskBgProject = new PIXI.Graphics()),
              this.maskBgProject.beginFill(t, 1),
              this.maskBgProject.moveTo(
                e + this.padding,
                this.maskY + this.padding
              ),
              this.maskBgProject.lineTo(
                e + this.padding,
                this.maskY + this.padding
              ),
              this.maskBgProject.lineTo(
                e + this.images[0].width - this.padding,
                this.maskY + this.padding
              ),
              this.maskBgProject.lineTo(
                e + this.images[0].width - this.padding,
                this.maskY + this.images[0].height - this.padding
              ),
              this.maskBgProject.lineTo(
                e + this.padding,
                this.maskY + this.images[0].height - this.padding
              ),
              this.maskBgProject.endFill(),
              this.maskContainer.addChild(this.maskBgProject),
              "projects-slug" === this.$route.name)
            ) {
              var i = this.maskBgProject.x + this.images[0].width + 350;
              this.maskBgProject.scale.set(1.5),
                (this.maskBgProject.x = i),
                (this.projectsContainer.filterArea = new PIXI.Rectangle(
                  0,
                  0,
                  this.appW,
                  this.appH
                ));
            }
          },
          toggleMainCanvas: function(t) {
            "start" === t && "none" === this.app.renderer.view.style.display
              ? ((this.app.renderer.view.style.display = "block"),
                this.app.start())
              : "stop" === t &&
                "block" === this.app.renderer.view.style.display &&
                ((this.app.renderer.view.style.display = "none"),
                this.app.stop());
          },
          initCursor: function() {
            var t = this;
            (this.cursorContainer = new PIXI.Container()),
              (this.cursorElm = new PIXI.Graphics()),
              this.cursorElm.beginFill(13421772, 1),
              this.cursorElm.drawCircle(0, 0, 32),
              this.cursorElm.endFill(),
              (this.cursorElm.x = this.appW / 2),
              (this.cursorElm.y = this.appH / 2),
              (this.cursorElm.alpha = 0),
              (this.cursorElm.scale.x = 0.3),
              (this.cursorElm.scale.y = 0.3),
              this.cursorContainer.addChild(this.cursorElm),
              this.app.stage.addChild(this.cursorContainer),
              (this.cursorPos = { x: this.appW / 2, y: this.appH / 2 }),
              window.addEventListener("mousemove", function(e) {
                1 !== t.cursorElm.alpha &&
                  s.TweenMax.to(t.cursorElm, 0.5, {
                    alpha: 0.3,
                    ease: Cubic.ease
                  }),
                  (t.cursorPos.x = e.clientX + 5),
                  (t.cursorPos.y = e.clientY + 5);
              }),
              window.addEventListener("wheel", function() {
                0 !== t.cursorElm.alpha &&
                  s.TweenMax.to(t.cursorElm, 0.5, {
                    alpha: 0,
                    ease: Cubic.ease
                  });
              }),
              a.a.$on("triggerLinkHover", function(e) {
                "hover" === e.state
                  ? s.TweenMax.to(t.cursorElm.scale, 0.3, {
                      x: 1,
                      y: 1,
                      ease: Cubic.ease
                    })
                  : "out" === e.state &&
                    s.TweenMax.to(t.cursorElm.scale, 0.3, {
                      x: 0.3,
                      y: 0.3,
                      ease: Cubic.ease
                    });
              });
          },
          moveAllProjects: function(t) {
            var e = this.appW / 2 - 500 * t;
            if (t !== this.lastAllProjectsIndex) {
              for (var i = 0; i < this.containersAllProjects.length; i += 1)
                this.lastAllProjectsIndex > t
                  ? (s.TweenMax.to(this.containersAllProjects[i].skew, 0.2, {
                      x: -0.025,
                      ease: Power3.easeInOut
                    }),
                    s.TweenMax.to(this.containersAllProjects[i].skew, 0.2, {
                      x: 0,
                      delay: 0.2,
                      ease: Power3.easeInOut
                    }))
                  : (s.TweenMax.to(this.containersAllProjects[i].skew, 0.2, {
                      x: 0.025,
                      ease: Power3.easeInOut
                    }),
                    s.TweenMax.to(this.containersAllProjects[i].skew, 0.2, {
                      x: 0,
                      delay: 0.2,
                      ease: Power3.easeInOut
                    }));
              s.TweenMax.to(this.allProjectsContainer, 0.5, {
                x: e,
                ease: Cubic.ease
              }),
                (this.lastAllProjectsIndex = t);
            }
          },
          selectAllProjects: function(t) {
            var e = this;
            this.changeImageWithoutAnimation(
              this.$store.state.currentProjectIndex,
              t
            ),
              (this.$store.state.currentProjectIndex = t),
              this.maskBgProject.scale.set(1.5),
              (this.maskBgProject.x = this.images[0].width + 350),
              (this.maskContainer.x = this.appW / 2),
              s.TweenMax.to(this.allProjectsContainer, 0.5, {
                alpha: 0,
                ease: Cubic.ease
              }),
              setTimeout(function() {
                (e.allProjectsContainer.visible = !1),
                  e.app.stage.removeChild(e.allProjectsContainer);
              }, 500),
              (this.maskContainer.visible = !0),
              this.app.stage.addChild(this.maskContainer),
              s.TweenMax.to(this.maskContainer, 0.2, {
                alpha: 1,
                ease: Cubic.ease
              }),
              (this.maskContainer.buttonMode = !1),
              (this.maskContainer.defaultCursor = void 0);
          },
          updateCanvas: function(t) {
            this.app.stage.removeChild(this.cursorContainer),
              this.app.stage.removeChild(this.bgContainer),
              this.app.stage.removeChild(this.rectContainer),
              this.app.stage.removeChild(this.maskContainer),
              this.initBackground(),
              this.initRect(t),
              this.initProjectsImages(t),
              this.initAllProjects(),
              this.initCursor();
          },
          listenResize: function() {
            var t = this;
            window.addEventListener("resize", function() {
              (t.appW = window.innerWidth),
                (t.appH = window.innerHeight),
                t.app.renderer.resize(t.appW, t.appH),
                t.updateCanvas(!0);
            });
          },
          listenGlobalEvents: function() {
            var t = this;
            a.a.$on("switchToHome", function(e) {
              t.switchToHome();
            }),
              a.a.$on("switchToProject", function(e) {
                t.switchToProject();
              }),
              a.a.$on("switchToAbout", function(e) {
                t.switchToAbout();
              }),
              a.a.$on("switchToAllProjects", function(e) {
                t.switchToAllProjects();
              }),
              a.a.$on("updateCanvas", function(e) {
                t.updateCanvas();
              }),
              a.a.$on("changeProject", function(e) {
                t.changeImage(e.currentProjectIndex, e.nextProjectIndex);
              }),
              a.a.$on("changeProjectWithoutAnimation", function(e) {
                t.changeImageWithoutAnimation(
                  e.currentProjectIndex,
                  e.nextProjectIndex
                );
              }),
              a.a.$on("toggleMainCanvas", function(e) {
                t.toggleMainCanvas(e.state);
              }),
              a.a.$on("allProjectHover", function(e) {
                t.moveAllProjects(e.index);
              }),
              a.a.$on("allProjectClick", function(e) {
                t.selectAllProjects(e.index);
              });
          },
          animate: function() {
            requestAnimationFrame(this.animate),
              (this.noiseFilterBg.seed = 1 * Math.random() * 0.05),
              (this.displacementSprite.x += this.displacementSpeed),
              (this.displacementSprite.y += this.displacementSpeed),
              s.TweenMax.to(this.cursorElm, 0.5, {
                x: this.cursorPos.x,
                y: this.cursorPos.y,
                ease: Cubic.ease
              });
          },
          convertProjectsToArray: function() {
            for (var t in this.projects)
              if (this.projects.hasOwnProperty(t)) {
                var e = this.projects[t];
                this.projectsArray.push(e);
              }
          }
        }
      };
    }
</script>
