{"version":3,"sources":["components/PixiCarousel.jsx"],"names":["PixiCarousel","props","_this","Object","_Users_mt0397_Documents_hari_travel_store_live_travel_store_template_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_Users_mt0397_Documents_hari_travel_store_live_travel_store_template_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_mt0397_Documents_hari_travel_store_live_travel_store_template_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","checkIdle","t","yourFunction","setState","idle","canvas","stopTicker","clearTimeout","setTimeout","startTicker","changeBg","ind","img","animating","prev","moveSlider","next","n","changeBgInd","nextInd","changeTimer","images","carouselImages","_this2","image","Image","src","onload","initCanvasSlideshow","window","CanvasSlideshow","sprites","displacementImage","autoPlay","autoPlaySpeed","displaceScale","fullscreen","containerId","stageWidth","width","stageHeight","height","_this3","_this$props","id","index","actions","left","timer","setInterval","clearInterval","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","key","style","display","onLoad","alt","Component"],"mappings":"uJAEMA,cAEJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAFRQ,MAAQ,GACWP,EAuCnBQ,UAAY,WACV,IAAIC,EACEC,EAAe,WACnBV,EAAKW,SAAS,CAAEC,MAAM,IAEtBZ,EAAKO,MAAMM,OAAOC,cAGlBC,aAAaN,GACbA,EAAIO,WAAWN,EAAc,KACzBV,EAAKO,MAAMK,MAAMZ,EAAKO,MAAMM,OAAOI,eAjDxBjB,EAwDnBkB,SAAW,SAACC,EAAKC,IAUc,IAAzBpB,EAAKO,MAAMc,WAObrB,EAAKW,SAAS,CAAEW,KAAMH,IACtBnB,EAAKO,MAAMc,WAAY,EACvBrB,EAAKO,MAAMM,OAAOU,WAAWJ,GAE7BH,WAAW,WAGT,GAFAhB,EAAKO,MAAMc,WAAY,EAEnBrB,EAAKO,MAAMiB,MAAQ,EAAG,CACxB,IAAIC,EAAIzB,EAAKO,MAAMiB,KACnBxB,EAAKO,MAAMiB,MAAQ,EAEnBxB,EAAKO,MAAMM,OAAOU,WAAWE,GAC7BzB,EAAKkB,SAASO,KAEf,OAUHzB,EAAKO,MAAMiB,KAAOL,GAjGHnB,EAsGnB0B,YAAc,SAAAP,GACRnB,EAAKO,MAAMK,OACbZ,EAAKO,MAAMM,OAAOI,cAClBjB,EAAKW,SAAS,CAAEC,MAAM,KAExBZ,EAAKW,SAAS,CAAEgB,QAASR,EAAKS,YAAa,QAxG3C5B,EAAKO,MAAMsB,OAAS7B,EAAKD,MAAM+B,eAC/B9B,EAAKO,MAAMc,WAAY,EACvBrB,EAAKO,MAAMiB,MAAQ,EACnBxB,EAAKO,MAAMe,KAAO,EANDtB,mFASC,IAAA+B,EAAA5B,KACd6B,EAAQ,IAAIC,MAChBD,EAAME,IAAM/B,KAAKI,MAAMsB,OAAO,GAC9BG,EAAMG,OAAS,WAGb,IAAIC,EAAsB,IAAIC,OAAOC,gBAAgB,CACnDC,QAASR,EAAKxB,MAAMsB,OACpBW,kBACE,gEAEFC,UAAU,EACVC,cAAe,CAAC,GAAI,GACpBC,cAAe,CAAC,IAAK,IACrBC,YAAY,EACZC,YAAad,EAAKhC,MAAM8C,YACxBC,WAAYd,EAAMe,MAClBC,YAAahB,EAAMiB,SAOrBlB,EAAKpB,SAAS,CAAEE,OAAQuB,KAG1BjC,KAAKK,6CAyEE,IAAA0C,EAAA/C,KAAAgD,EAC6BhD,KAAKJ,MAAnCqD,EADCD,EACDC,GAAIpB,EADHmB,EACGnB,MAAgBqB,GADnBF,EACUG,QADVH,EACmBE,OAMtBE,EAAO,EAGPC,EAAQC,YAAY,WAET,KADbF,GAAQ,KAENG,cAAcF,GAEVH,IAAUH,EAAK3C,MAAMoB,UAEvBuB,EAAK3C,MAAMM,OAAOU,WAAW8B,GAE7BrC,WAAW,WACTkC,EAAKvC,SAAS,CAAEC,MAAM,IACtBsC,EAAK3C,MAAMM,OAAOC,cACjB,QAIN,KAEH,OACE6C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAA,OAAKT,GAAIjD,KAAKJ,MAAM8C,gBAEV,YAAPO,IACDO,EAAAC,EAAAC,cAAA,OACE3B,IAAKF,EACL+B,IAAKV,EACLW,MAAO,CAAEC,QAAS,QAElBC,OAAQ,kBAAMhB,EAAKxB,YAAY2B,IAC/Bc,IAAI,aAtJWC,aA8JZtE","file":"static/js/0.89e5a5a7.chunk.js","sourcesContent":["import React, { Component } from \"react\";\n\nclass PixiCarousel extends Component {\n  state = {};\n  constructor(props) {\n    super(props);\n\n    this.state.images = this.props.carouselImages;\n    this.state.animating = false;\n    this.state.next = -1;\n    this.state.prev = 0;\n  }\n\n  componentDidMount() {\n    var image = new Image();\n    image.src = this.state.images[0];\n    image.onload = () => {\n      // console.log(image.width, image.height);\n\n      let initCanvasSlideshow = new window.CanvasSlideshow({\n        sprites: this.state.images,\n        displacementImage:\n          \"/travel_store_template/LiquidDistortion-master/img/clouds.jpg\",\n        // \"/LiquidDistortion-master/img/clouds.jpg\",\n        autoPlay: true,\n        autoPlaySpeed: [10, 3],\n        displaceScale: [200, 70],\n        fullscreen: false,\n        containerId: this.props.containerId,\n        stageWidth: image.width,\n        stageHeight: image.height\n        // interactive: true,\n        // interactionEvent: \"both\"\n      });\n\n      // initCanvasSlideshow.stopTicker();\n\n      this.setState({ canvas: initCanvasSlideshow });\n    };\n\n    this.checkIdle();\n  }\n\n  checkIdle = () => {\n    let t;\n    const yourFunction = () => {\n      this.setState({ idle: true });\n      // document.getElementById(\"root\").classList.add(\"Idle\");\n      this.state.canvas.stopTicker();\n    };\n    const resetTimer = () => {\n      clearTimeout(t);\n      t = setTimeout(yourFunction, 5000); // time is in milliseconds\n      if (this.state.idle) this.state.canvas.startTicker();\n    };\n\n    resetTimer();\n  };\n\n  //old logic\n  changeBg = (ind, img) => {\n    //    console.log(ind, this.state.images[ind]);\n\n    // var image = new Image();\n    // image.src = img;\n    // image.onload = () => {\n    //   let canvas = document.getElementsByTagName(\"canvas\")[0];\n    //   canvas.width = image.width;\n    //   canvas.height = image.height;\n    // };\n    if (this.state.animating === false) {\n      // console.log(\"now starting\", ind);\n      // this.setState({ animating: true });\n      // this.setState((state, props) => {\n      //   state.animating = true;\n      //   return null;\n      // });\n      this.setState({ prev: ind });\n      this.state.animating = true;\n      this.state.canvas.moveSlider(ind);\n\n      setTimeout(() => {\n        this.state.animating = false;\n        //this.setState({ animating: false });\n        if (this.state.next > -1) {\n          let n = this.state.next;\n          this.state.next = -1;\n          // console.log(\"end\", n);\n          this.state.canvas.moveSlider(n);\n          this.changeBg(n);\n        }\n      }, 2500);\n      // setTimeout(\n      //   () =>\n      //     this.setState((state, props) => ({\n      //       animating: false\n      //     })),\n      //   2500\n      // );\n    } else {\n      // console.log(\"running\", this.state.animating);\n      this.state.next = ind;\n      // console.log(this.state.next);\n    }\n  };\n\n  changeBgInd = ind => {\n    if (this.state.idle) {\n      this.state.canvas.startTicker();\n      this.setState({ idle: false });\n    }\n    this.setState({ nextInd: ind, changeTimer: 2500 });\n  };\n  render() {\n    let { id, image, actions, index } = this.props;\n\n    // if (this.state.animating === false && this.state.next > -1)\n    //   this.changeBg(index, image);\n    // console.log(\"render\", this.state.next);\n    // console.log(this.state.nextInd, this.state.changeTimer);\n    let left = 1; // sec wait\n    //this.state.changeTimer;\n    // console.log(\"in\", index, this.props.containerId);\n    let timer = setInterval(() => {\n      left -= 1;\n      if (left === 0) {\n        clearInterval(timer);\n        // console.log(index, this.state.nextInd, \"end\");\n        if (index === this.state.nextInd) {\n          // this.changeBg(index);\n          this.state.canvas.moveSlider(index);\n\n          setTimeout(() => {\n            this.setState({ idle: true });\n            this.state.canvas.stopTicker();\n          }, 10000);\n          // console.log(\"got it\", index);\n        }\n      }\n    }, 1000);\n\n    return (\n      <div className=\"Carousel-section\">\n        <div id={this.props.containerId} />\n\n        {!(id === \"initial\") && (\n          <img\n            src={image}\n            key={index}\n            style={{ display: \"none\" }}\n            // style={{ opacity: \"0.1\" }}\n            onLoad={() => this.changeBgInd(index)}\n            alt=\"\"\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default PixiCarousel;\n"],"sourceRoot":""}